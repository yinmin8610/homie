(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b7258544"],{"28c1":function(t,e,n){},"3ca3":function(t,e,n){"use strict";var r=n("6547").charAt,a=n("69f3"),o=n("7dd0"),i="String Iterator",s=a.set,c=a.getterFor(i);o(String,"String",(function(t){s(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),n=e.string,a=e.index;return a>=n.length?{value:void 0,done:!0}:(t=r(n,a),e.index+=t.length,{value:t,done:!1})}))},"41c2":function(t,e,n){"use strict";var r=n("4f6f"),a=n.n(r);a.a},"43ef":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ReservationRecord"},[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{staticClass:"p-0",attrs:{md:"6"}},[n("section",{staticClass:"record-info p-4 h-100"},[n("div",{staticClass:"cardlist d-flex d-xl-block mb-2 mb-xl-0"},[t.reservationStatus?t._l(t.reservation,(function(t,e){return n("CardList",{key:e,attrs:{cardList:t}})})):t._e()],2)])]),n("b-col",{staticClass:"pr-0",attrs:{md:"6"}},[n("section",{staticClass:"record-map"},[n("div",{staticStyle:{height:"100vh"}},[n("l-map",{staticStyle:{height:"100%",width:"100%"},attrs:{zoom:t.zoom,center:t.center},on:{"update:zoom":t.zoomUpdated,"update:center":t.centerUpdated,"update:bounds":t.boundsUpdated}},[n("l-tile-layer",{attrs:{url:t.url}}),t.reservationStatus?t._l(t.reservation,(function(e,r){return n("l-marker",{key:r,attrs:{"lat-lng":[e.lat,e.lng]}},[n("l-popup",[n("div",[n("b",[t._v("房源名稱：")]),t._v(t._s(e.room.name))]),n("div",[n("b",[t._v("預約日期：")]),t._v(t._s(e.date))]),n("div",[n("b",[t._v("預約時間：")]),t._v(t._s(e.hour)+" "+t._s(e.time))])])],1)})):t._e()],2)],1)])])],1)],1)],1)},a=[],o=(n("99af"),n("4160"),n("b0c0"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("96cf"),n("1da1")),i=n("c995"),s=n("e11e"),c=n("2699"),u=n("a40a"),l=n("4e2b"),d=n("f60f");delete s["Icon"].Default.prototype._getIconUrl,s["Icon"].Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")});var p={name:"ReservationRecord",components:{CardList:i["a"],LMap:c["a"],LTileLayer:u["a"],LMarker:l["a"],LPopup:d["a"]},data:function(){return{typeSelected:null,typeOptions:[{value:null,text:"房源型態",notEnabled:!0},{value:"大樓",text:"大樓"},{value:"公寓",text:"公寓"},{value:"透天",text:"透天"}],patternSelected:null,patternOptions:[{value:null,text:"房間類型",notEnabled:!0},{value:"雅房",text:"雅房"},{value:"獨立套房",text:"獨立套房"},{value:"分租套房",text:"分租套房"}],squareSelected:null,squareOptions:[{value:null,text:"坪數",notEnabled:!0},{value:"10坪以下",text:"10坪以下"},{value:"10-20坪",text:"10-20坪"},{value:"20-30坪",text:"20-30坪"},{value:"30-40坪",text:"30-40坪"},{value:"40坪以上",text:"40坪以上"}],rentalSelected:null,rentalOptions:[{value:null,text:"租金",notEnabled:!0},{value:"5000元以下",text:"5000元以下"},{value:"5000-10000元",text:"5000-10000元"},{value:"10000-15000元",text:"10000-15000元"},{value:"15000-20000元",text:"15000-20000元"},{value:"20000元以上",text:"20000元以上"}],reservation:[],reservationStatus:!1,houseId:[],room:[],status:{},url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:12,center:[22.623716,120.284243],bounds:null}},methods:{getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,r="".concat("http://localhost:3000","/reservation"),t.status=JSON.parse(localStorage.getItem("STATUS")),e.next=5,n.$http.get(r).then((function(e){var r={};r=e.data,r.forEach((function(e){e.userId===t.status.id&&n.reservation.push(e)})),n.reservation.forEach((function(t){n.houseId.push(t.houseId),t.room={}}))}));case 5:return a=[],e.next=8,n.houseId.forEach((function(t){a.push(n.$http.get("".concat("http://localhost:3000","/rooms/").concat(t)).then((function(t){n.room.push(t.data)})))}));case 8:Promise.all(a).then((function(t){n.filterData()}));case 9:case"end":return e.stop()}}),e)})))()},filterData:function(){var t=this;this.reservation.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.room.forEach((function(t){n.houseId===String(t.id)&&(n.room.id=t.id,n.room.name=t.name,n.room.room=t.room,n.room.monthly=t.monthly,n.room.img1=t.img1)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.reservationStatus=!0},zoomUpdated:function(t){this.zoom=t},centerUpdated:function(t){this.center=t},boundsUpdated:function(t){this.bounds=t}},created:function(){this.getData()}},f=p,h=(n("41c2"),n("2877")),v=Object(h["a"])(f,r,a,!1,null,"07a9274d",null);e["default"]=v.exports},"4f6f":function(t,e,n){},6547:function(t,e,n){var r=n("a691"),a=n("1d80"),o=function(t){return function(e,n){var o,i,s=String(a(e)),c=r(n),u=s.length;return c<0||c>=u?t?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===u||(i=s.charCodeAt(c+1))<56320||i>57343?t?s.charAt(c):o:t?s.slice(c,c+2):i-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},"656f":function(t,e,n){"use strict";var r=n("28c1"),a=n.n(r);a.a},b0c0:function(t,e,n){var r=n("83ab"),a=n("9bf2").f,o=Function.prototype,i=o.toString,s=/^\s*function ([^ (]*)/,c="name";!r||c in o||a(o,c,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(t){return""}}})},c995:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cardList"},[n("b-link",{attrs:{to:{path:"/houses/"+t.cardList.houseId}}},[n("b-card",{staticClass:"overflow-hidden mb-xl-2 mb-0 mr-2 mr-xl-0",staticStyle:{"max-width":"540px"},attrs:{"no-body":""}},[n("b-row",{attrs:{"no-gutters":""}},[n("b-col",{staticClass:"d-none d-xl-block",attrs:{md:"4"}},[n("b-card-img",{staticClass:"rounded-0",attrs:{src:t.cardList.room.img1,height:"100%"}})],1),n("b-col",{attrs:{md:"8"}},[n("b-card-body",[n("b-card-title",[t._v(" "+t._s(t.cardList.room.name)+"- "),n("small",{staticClass:"text-secondary"},[t._v(t._s(t.cardList.room.room))])]),n("b-card-text",[t.cardList.time?[n("b-icon",{attrs:{icon:"calendar-fill",variant:"primary"}}),n("label",{staticClass:"mr-2"},[t._v(t._s(t.cardList.date))]),n("b-icon",{attrs:{icon:"clock-fill",variant:"primary"}}),n("label",[t._v(t._s(t.cardList.time))])]:t._e(),[n("b-icon",{attrs:{icon:"calendar-fill",variant:"primary"}}),n("label",{staticClass:"mr-2"},[t._v(t._s(t.cardList.startDate)+" ")]),n("label",{staticClass:"mr-2"},[t._v(t._s(t.cardList.endDate))])]],2),n("b-card-text",{staticClass:"d-flex justify-content-end align-items-end h4"},[t._v(t._s(t.cardList.room.monthly)+"/月 "),t.cardList.date?[n("b-button",{staticClass:"ml-2 text-primary",attrs:{variant:"outline-primary",to:{name:"amount",params:{rentId:t.cardList.id,srcName:t.$route.name,houseId:t.cardList.houseId,landlordId:t.cardList.landlordId,landlordEmail:t.cardList.landlordEmail,lat:t.cardList.lat,lng:t.cardList.lng}}}},[t._v("租屋")])]:t._e()],2)],1)],1)],1)],1)],1)],1)},a=[],o={name:"CardList",props:["cardList"],data:function(){return{}}},i=o,s=(n("656f"),n("2877")),c=Object(s["a"])(i,r,a,!1,null,"6865f1fe",null);e["a"]=c.exports},ddb0:function(t,e,n){var r=n("da84"),a=n("fdbc"),o=n("e260"),i=n("9112"),s=n("b622"),c=s("iterator"),u=s("toStringTag"),l=o.values;for(var d in a){var p=r[d],f=p&&p.prototype;if(f){if(f[c]!==l)try{i(f,c,l)}catch(v){f[c]=l}if(f[u]||i(f,u,d),a[d])for(var h in o)if(f[h]!==o[h])try{i(f,h,o[h])}catch(v){f[h]=o[h]}}}},f60f:function(t,e,n){"use strict";var r=n("e11e"),a=function(t){return t&&"function"===typeof t.charAt?t.charAt(0).toUpperCase()+t.slice(1):t},o=function(t,e,n,o){var i=function(o){var i="set"+a(o),s=n[o].type===Object||n[o].type===Array||Array.isArray(n[o].type);n[o].custom&&t[i]?t.$watch(o,(function(e,n){t[i](e,n)}),{deep:s}):"setOptions"===i?t.$watch(o,(function(t,n){Object(r["setOptions"])(e,t)}),{deep:s}):e[i]&&t.$watch(o,(function(t,n){e[i](t)}),{deep:s})};for(var s in n)i(s)},i=function(t){var e={};for(var n in t){var r=t[n];null!==r&&void 0!==r&&(e[n]=r)}return e},s=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var r=i(n);t=i(t);var a=e.$options.props;for(var o in t){var s=a[o]?a[o].default:Symbol("unique");r[o]&&s!==t[o]?(console.warn(o+" props is overriding the value passed in the options props"),r[o]=t[o]):r[o]||(r[o]=t[o])}return r},c=function(t){var e=!1;while(t&&!e)void 0===t.mapObject?t=t.$parent:e=!0;return t},u={props:{content:{type:String,default:null,custom:!0}},mounted:function(){this.popperOptions={}},methods:{setContent:function(t){this.mapObject&&null!==t&&void 0!==t&&this.mapObject.setContent(t)}},render:function(t){return this.$slots.default?t("div",this.$slots.default):null}},l={props:{options:{type:Object,default:function(){return{}}}}},d={name:"LPopup",mixins:[u,l],props:{latLng:{type:[Object,Array],default:function(){return[]}}},mounted:function(){var t=this,e=s(this.popperOptions,this);this.mapObject=Object(r["popup"])(e),void 0!==this.latLng&&this.mapObject.setLatLng(this.latLng),r["DomEvent"].on(this.mapObject,this.$listeners),o(this,this.mapObject,this.$options.props),this.mapObject.setContent(this.content||this.$el),this.parentContainer=c(this.$parent),this.parentContainer.mapObject.bindPopup(this.mapObject),this.$nextTick((function(){t.$emit("ready",t.mapObject)}))},beforeDestroy:function(){this.parentContainer&&(this.parentContainer.unbindPopup?this.parentContainer.unbindPopup():this.parentContainer.mapObject&&this.parentContainer.mapObject.unbindPopup&&this.parentContainer.mapObject.unbindPopup())}};function p(t,e,n,r,a,o,i,s,c,u){"boolean"!==typeof i&&(c=s,s=i,i=!1);var l,d="function"===typeof n?n.options:n;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,a&&(d.functional=!0)),r&&(d._scopeId=r),o?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=l):e&&(l=i?function(t){e.call(this,u(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),l)if(d.functional){var p=d.render;d.render=function(t,e){return l.call(e),p(t,e)}}else{var f=d.beforeCreate;d.beforeCreate=f?[].concat(f,l):[l]}return n}"undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var f=d,h=void 0,v=void 0,m=void 0,b=void 0,g=p({},h,f,v,b,m,!1,void 0,void 0,void 0);e["a"]=g}}]);
//# sourceMappingURL=chunk-b7258544.9efccab7.js.map